<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Application ML - Détection Défauts de Paiement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
  <div class="container mt-4">
    <div class="row">

      <!-- Formulaire 1 : Random Forest -->
      <div class="col-lg-4 col-md-6 mb-4">
        <h2 class="text-center">Formulaire 1 - Modèle Random Forest</h2>
        <form method="POST" action="/predict_rf">
          <div class="mb-3">
            <label for="limit_bal" class="form-label">Limite de crédit (limit_bal)</label>
            <input type="number" id="limit_bal" name="limit_bal" class="form-control" required />
          </div>

          <div class="mb-3">
            <label for="sex" class="form-label">Sexe</label>
            <select id="sex" name="sex" class="form-select" required>
              <option value="">Sélectionnez</option>
              <option value="Female">Femme</option>
              <option value="Male">Homme</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="education" class="form-label">Niveau d'éducation</label>
            <select id="education" name="education" class="form-select" required>
              <option value="">Sélectionnez</option>
              <option value="Graduate school">Graduate school</option>
              <option value="University">University</option>
              <option value="High school">High school</option>
              <option value="Others">Autres</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="marriage" class="form-label">Statut matrimonial</label>
            <select id="marriage" name="marriage" class="form-select" required>
              <option value="">Sélectionnez</option>
              <option value="Single">Célibataire</option>
              <option value="Married">Marié(e)</option>
              <option value="Divorced">Divorcé(e)</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="age" class="form-label">Âge</label>
            <input type="number" id="age" name="age" class="form-control" min="18" max="100" required />
          </div>

          <h5>Statut paiement (septembre à avril)</h5>
          <div class="row">
            {% for month in ['sep', 'aug', 'jul', 'jun', 'may', 'apr'] %}
              <div class="col-6 mb-3">
                <label for="payment_status_{{ month }}" class="form-label">Paiement {{ month|capitalize }}</label>
                <input type="number" id="payment_status_{{ month }}" name="payment_status_{{ month }}" class="form-control" step="1" min="-2" max="8" required />
              </div>
            {% endfor %}
          </div>

          <h5>Factures (septembre à avril)</h5>
          <div class="row">
            {% for month in ['sep', 'aug', 'jul', 'jun', 'may', 'apr'] %}
              <div class="col-6 mb-3">
                <label for="bill_statement_{{ month }}" class="form-label">Facture {{ month|capitalize }}</label>
                <input type="number" id="bill_statement_{{ month }}" name="bill_statement_{{ month }}" class="form-control" min="0" step="0.01" required />
              </div>
            {% endfor %}
          </div>

          <h5>Paiements précédents (septembre à avril)</h5>
          <div class="row">
            {% for month in ['sep', 'aug', 'jul', 'jun', 'may', 'apr'] %}
              <div class="col-6 mb-3">
                <label for="previous_payment_{{ month }}" class="form-label">Paiement précédent {{ month|capitalize }}</label>
                <input type="number" id="previous_payment_{{ month }}" name="previous_payment_{{ month }}" class="form-control" min="0" step="0.01" required />
              </div>
            {% endfor %}
          </div>

          <button type="submit" class="btn btn-primary w-100 mt-3">Prédire</button>

          {% if rf_result is defined %}
          <div class="alert alert-info mt-3 text-center">
            Résultat du modèle Random Forest : <strong>{{ rf_result }}</strong>
          </div>
          {% endif %}
        </form>
      </div>

      <!-- Formulaire 2 : NLP -->
      <div class="col-lg-4 col-md-6 mb-4">
        <h2 class="text-center">Formulaire 2 - Modèle NLP</h2>
        <form method="POST" action="/predict_nlp">
          <div class="mb-3">
            <label for="text_nlp" class="form-label">Texte à analyser</label>
            <textarea id="text_nlp" name="text_nlp" class="form-control" rows="8" placeholder="Entrez le texte à analyser..." required></textarea>
          </div>
          <button type="submit" class="btn btn-primary w-100">Analyser</button>

          {% if prediction_nlp is defined %}
          <div class="alert alert-info mt-3 text-center">
            Résultat NLP : <strong>{{ prediction_nlp }}</strong>
          </div>
          {% endif %}
        </form>
      </div>

      <!-- Formulaire 3 : LLM -->
      <div class="col-lg-4 col-md-12 mb-4">
        <h2 class="text-center">Formulaire 3 - Modèle LLM</h2>
        <form method="POST" action="/predict_llm">
          <div class="mb-3">
            <label for="text_llm" class="form-label">Question / Entrée LLM</label>
            <textarea id="text_llm" name="text_llm" class="form-control" rows="8" placeholder="Entrez votre question ou texte..." required></textarea>
          </div>
          <button type="submit" class="btn btn-primary w-100">Envoyer</button>

          {% if prediction_llm is defined %}
          <div class="alert alert-info mt-3 text-center">
            Résultat LLM : <strong>{{ prediction_llm }}</strong>
          </div>
          {% endif %}
        </form>
      </div>

    </div>
  </div>
</body>
</html>

